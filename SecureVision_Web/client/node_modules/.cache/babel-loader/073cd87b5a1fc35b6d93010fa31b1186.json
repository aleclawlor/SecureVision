{"ast":null,"code":"var _jsxFileName = \"/Users/aleclawlor/SecureVision/client/src/components/configuration/lprConfig.js\";\nimport React, { Component, createRef } from 'react';\nimport Button from '@material-ui/core/Button';\nimport ReactPlayer from 'react-player';\nimport Axios from 'axios';\nimport SaveModal from './lprSaveModal';\nconst classes = {\n  returnArrow: {\n    fontSize: '40px',\n    position: 'absolute',\n    marginTop: '30px'\n  },\n  buttonsArea: {\n    width: '100%',\n    overflow: 'scroll',\n    height: '80px',\n    marginTop: '30px'\n  },\n  canvasArea: {\n    width: '80%',\n    height: '400px',\n    display: 'flex',\n    // backgroundColor: '#333',\n    textAlign: 'center',\n    justifyContent: 'center',\n    marginTop: '5px'\n  },\n  canvas: {\n    backgroundColor: 'rgba(0, 0, 0, .1)',\n    position: 'absolute',\n    zIndex: '20',\n    width: '640px',\n    height: '360px'\n  },\n  buttonStyling: {\n    marginLeft: '20px',\n    marginRight: '20px'\n  },\n  configButtons: {\n    width: '20%',\n    height: '100%',\n    textAlign: 'left',\n    marginLeft: '250px',\n    marginLeft: '80%'\n  }\n}; // component to update which areas of a video are 'fair game' for license plate recongition\n// necessary for school customization and cases in which default configuration might not cover the entire necessary area \n// area selection can help performance and tailor the product to specific school cameras rather than a one-size-fits-all solution\n\nclass LprConfig extends Component {\n  constructor(...args) {\n    super(...args);\n    this.canvasWidth = 200;\n    this.canvasHeight = 200;\n    this.state = {\n      currentSource: null,\n      promptSave: false,\n      camerasList: null,\n      videoSource: null,\n      initialPointsObject: {\n        x0: 0,\n        y0: 0,\n        width: 0,\n        height: 0\n      },\n      currentPointsObject: {\n        x0: 0,\n        y0: 0,\n        width: 0,\n        height: 0\n      },\n      playing: false,\n      currentCameraID: null\n    };\n    this.canvasRef = createRef();\n    this.videoRef = createRef();\n\n    this.refresh = () => {\n      Axios.get('/api/cameras/getCameras').then(data => {\n        // set the retrieved cameras to state variable \n        this.setState({\n          camerasList: data.data.filter(d => {\n            console.log(d);\n            return d.isActive;\n          }),\n          promptSave: false\n        });\n      });\n    };\n\n    this.submitConfiguration = () => {\n      // get the current points object\n      const pts = this.state.currentPointsObject;\n      console.log(pts); // update the configuration for a specific camera\n\n      Axios.put('/api/cameras/updateConfigurationArea', {\n        id: this.state.currentCameraID,\n        x0: pts.x0,\n        y0: pts.y0,\n        x1: pts.x0 + pts.width,\n        y1: pts.y0 + pts.height,\n        width: pts.width,\n        height: pts.height\n      }).then(data => {\n        console.log(data);\n        this.refresh();\n      });\n    };\n\n    this.setCurrentCamera = data => {\n      console.log(data);\n      console.log(data.areaConfiguration);\n      let savedConfiguration = data.areaConfiguration;\n      let config = {\n        x0: savedConfiguration.x0,\n        y0: savedConfiguration.y0,\n        width: savedConfiguration.width,\n        height: savedConfiguration.height\n      }; // change state to currently selected camera \n\n      this.setState({\n        currentSource: data.source,\n        currentCameraID: data._id,\n        currentPointsObject: config\n      });\n      console.log(config);\n    };\n  }\n\n  // when the component is mounted, set the initial configuration selection to the first camera in the camera list \n  componentDidMount() {\n    let source;\n    Axios.get('/api/cameras/getCameras').then(data => {\n      source = data.data[0].source;\n      this.setState({\n        camerasList: data.data.filter(d => d.isActive),\n        currentSource: data.data[0].source,\n        playing: true\n      });\n      console.log(data);\n    }).catch(err => {\n      console.log(err);\n    });\n  } // called when html canvas is updated \n\n\n  componentDidUpdate() {\n    // use html canvas to update the current configuration for a camera \n    const canvas = this.canvasRef.current;\n    canvas.addEventListener('mousedown', e => console.log(e));\n    const ctx = canvas.getContext('2d');\n    ctx.strokeStyle = 'red';\n    const canvasWidth = canvas.width;\n    this.canvasWidth = canvasWidth;\n    const canvasHeight = canvas.height; // clear the previously drawn area so that the rectangle area moves \n\n    ctx.clearRect(0, 0, canvasWidth, canvasHeight);\n    ctx.fill();\n    let {\n      x0,\n      y0,\n      width,\n      height\n    } = this.state.currentPointsObject;\n    let vid = document.getElementById('vid'); // ctx.drawImage(vid, 0, 0, canvasWidth, canvasHeight)\n\n    ctx.strokeRect(x0, y0, width, height);\n    ctx.save();\n  } // post current configutration for a camera to database \n\n\n  render() {\n    console.log(this.state.currentPointsObject);\n    let buttons = this.state.camerasList ? this.state.camerasList.map((data, index) => {\n      console.log(data);\n      return data.isActive ?\n      /*#__PURE__*/\n      // only render active cameras \n      React.createElement(Button, {\n        style: classes.buttonStyling,\n        key: index,\n        onClick: () => this.setCurrentCamera(data),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 13\n        }\n      }, data.name) : null;\n    }) : null;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 17\n      }\n    }, \"Configure License Plate Detection Zone\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 17\n      }\n    }, \"Select a camera feed to configuzre its license plate detection area. Only license plates within the desingated box will be detected.\"), /*#__PURE__*/React.createElement(\"div\", {\n      style: classes.buttonsArea,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 17\n      }\n    }, buttons), /*#__PURE__*/React.createElement(\"div\", {\n      style: classes.canvasArea,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        backgroundColor: 'red',\n        overflow: 'hidden'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"canvas\", {\n      style: classes.canvas,\n      ref: this.canvasRef,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"iframe\", {\n      src: this.state.currentSource,\n      style: {\n        position: 'absolute'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(ReactPlayer, {\n      style: {\n        position: 'absolute'\n      },\n      ref: this.videoRef,\n      url: this.state.currentSource,\n      playing: true,\n      muted: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      style: classes.configButtons,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: () => {\n        const x0 = this.state.currentPointsObject.x0;\n        const y0 = this.state.currentPointsObject.y0 - 3;\n        const width = this.state.currentPointsObject.width;\n        const height = this.state.currentPointsObject.height;\n        const coordsObj = {\n          x0: x0,\n          y0: y0,\n          width: width,\n          height: height\n        };\n        this.setState({\n          currentPointsObject: coordsObj\n        });\n      },\n      style: {\n        textAlign: 'left',\n        marginBottom: '10px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 21\n      }\n    }, \"Vertical Up\"), /*#__PURE__*/React.createElement(Button, {\n      onClick: () => {\n        const x0 = this.state.currentPointsObject.x0;\n        const y0 = this.state.currentPointsObject.y0 + 3;\n        const width = this.state.currentPointsObject.width;\n        const height = this.state.currentPointsObject.height;\n        const coordsObj = {\n          x0: x0,\n          y0: y0,\n          width: width,\n          height: height\n        };\n        this.setState({\n          currentPointsObject: coordsObj\n        });\n      },\n      style: {\n        textAlign: 'left',\n        marginBottom: '10px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 21\n      }\n    }, \"Vertical Down\"), /*#__PURE__*/React.createElement(Button, {\n      onClick: () => {\n        const x0 = this.state.currentPointsObject.x0 - 3;\n        const y0 = this.state.currentPointsObject.y0;\n        const width = this.state.currentPointsObject.width;\n        const height = this.state.currentPointsObject.height;\n        const coordsObj = {\n          x0: x0,\n          y0: y0,\n          width: width,\n          height: height\n        };\n        this.setState({\n          currentPointsObject: coordsObj\n        });\n      },\n      style: {\n        textAlign: 'left',\n        marginBottom: '10px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 21\n      }\n    }, \"Horizontal Left\"), /*#__PURE__*/React.createElement(Button, {\n      onClick: () => {\n        const x0 = this.state.currentPointsObject.x0 + 3;\n        const y0 = this.state.currentPointsObject.y0;\n        const width = this.state.currentPointsObject.width;\n        const height = this.state.currentPointsObject.height;\n        const coordsObj = {\n          x0: x0,\n          y0: y0,\n          width: width,\n          height: height\n        };\n        this.setState({\n          currentPointsObject: coordsObj\n        });\n      },\n      style: {\n        textAlign: 'left',\n        marginBottom: '10px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 21\n      }\n    }, \"Horizontal Right\"), /*#__PURE__*/React.createElement(Button, {\n      onClick: () => {\n        const x0 = this.state.currentPointsObject.x0;\n        const y0 = this.state.currentPointsObject.y0;\n        const width = this.state.currentPointsObject.width + 3;\n        const height = this.state.currentPointsObject.height;\n        const coordsObj = {\n          x0: x0,\n          y0: y0,\n          width: width,\n          height: height\n        };\n        this.setState({\n          currentPointsObject: coordsObj\n        });\n      },\n      style: {\n        textAlign: 'left',\n        marginBottom: '10px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 21\n      }\n    }, \"Expand Width\"), /*#__PURE__*/React.createElement(Button, {\n      onClick: () => {\n        const x0 = this.state.currentPointsObject.x0;\n        const y0 = this.state.currentPointsObject.y0;\n        const width = this.state.currentPointsObject.width - 3;\n        const height = this.state.currentPointsObject.height;\n        const coordsObj = {\n          x0: x0,\n          y0: y0,\n          width: width,\n          height: height\n        };\n        this.setState({\n          currentPointsObject: coordsObj\n        });\n      },\n      style: {\n        textAlign: 'left',\n        marginBottom: '10px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 21\n      }\n    }, \"Minimize Width\"), /*#__PURE__*/React.createElement(Button, {\n      onClick: () => {\n        const x0 = this.state.currentPointsObject.x0;\n        const y0 = this.state.currentPointsObject.y0;\n        const width = this.state.currentPointsObject.width;\n        const height = this.state.currentPointsObject.height + 3;\n        const coordsObj = {\n          x0: x0,\n          y0: y0,\n          width: width,\n          height: height\n        };\n        this.setState({\n          currentPointsObject: coordsObj\n        });\n      },\n      style: {\n        textAlign: 'left',\n        marginBottom: '10px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 21\n      }\n    }, \"Expand Height\"), /*#__PURE__*/React.createElement(Button, {\n      onClick: () => {\n        const x0 = this.state.currentPointsObject.x0;\n        const y0 = this.state.currentPointsObject.y0;\n        const width = this.state.currentPointsObject.width;\n        const height = this.state.currentPointsObject.height - 3;\n        const coordsObj = {\n          x0: x0,\n          y0: y0,\n          width: width,\n          height: height\n        };\n        this.setState({\n          currentPointsObject: coordsObj\n        });\n      },\n      style: {\n        textAlign: 'left',\n        marginBottom: '10px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 21\n      }\n    }, \"Minimize Height\"))), /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/dashboard/configuration\",\n      style: {\n        textDecoration: 'none',\n        color: '#000'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      class: \"material-icons\",\n      style: classes.returnArrow,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 25\n      }\n    }, \"arrow_back\")), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        marginLeft: '8%',\n        alignItems: 'center',\n        marginTop: '3%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: () => {\n        this.setState({\n          promptSave: true\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 21\n      }\n    }, \"Save Configuration\"), /*#__PURE__*/React.createElement(SaveModal, {\n      open: this.state.promptSave,\n      cancel: () => {\n        this.setState({\n          promptSave: false\n        });\n      },\n      save: this.submitConfiguration,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 21\n      }\n    })));\n  }\n\n}\n\nexport default LprConfig;","map":{"version":3,"sources":["/Users/aleclawlor/SecureVision/client/src/components/configuration/lprConfig.js"],"names":["React","Component","createRef","Button","ReactPlayer","Axios","SaveModal","classes","returnArrow","fontSize","position","marginTop","buttonsArea","width","overflow","height","canvasArea","display","textAlign","justifyContent","canvas","backgroundColor","zIndex","buttonStyling","marginLeft","marginRight","configButtons","LprConfig","canvasWidth","canvasHeight","state","currentSource","promptSave","camerasList","videoSource","initialPointsObject","x0","y0","currentPointsObject","playing","currentCameraID","canvasRef","videoRef","refresh","get","then","data","setState","filter","d","console","log","isActive","submitConfiguration","pts","put","id","x1","y1","setCurrentCamera","areaConfiguration","savedConfiguration","config","source","_id","componentDidMount","catch","err","componentDidUpdate","current","addEventListener","e","ctx","getContext","strokeStyle","clearRect","fill","vid","document","getElementById","strokeRect","save","render","buttons","map","index","name","coordsObj","marginBottom","textDecoration","color","alignItems"],"mappings":"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","sourcesContent":["import React, { Component, createRef } from 'react'\nimport Button from '@material-ui/core/Button'\nimport ReactPlayer from 'react-player'\nimport Axios from 'axios'\nimport SaveModal from './lprSaveModal'\n\nconst classes = {\n    returnArrow: {\n        fontSize: '40px',\n        position: 'absolute',\n        marginTop: '30px'\n    },\n    buttonsArea: {\n        width: '100%',\n        overflow: 'scroll',\n        height: '80px',\n        marginTop: '30px'\n    },\n    canvasArea: {\n        width: '80%',\n        height: '400px',\n        display: 'flex',\n        // backgroundColor: '#333',\n        textAlign: 'center',\n        justifyContent: 'center',\n        marginTop: '5px'\n    },\n    canvas: {\n        backgroundColor: 'rgba(0, 0, 0, .1)',\n        position: 'absolute',\n        zIndex: '20',\n        width: '640px',\n        height: '360px'\n    },\n    buttonStyling: {\n        marginLeft: '20px',\n        marginRight: '20px'\n    },\n    configButtons: {\n        width: '20%',\n        height: '100%',\n        textAlign: 'left',\n        marginLeft: '250px',\n        marginLeft: '80%'\n    }\n}\n\n// component to update which areas of a video are 'fair game' for license plate recongition\n// necessary for school customization and cases in which default configuration might not cover the entire necessary area \n// area selection can help performance and tailor the product to specific school cameras rather than a one-size-fits-all solution\nclass LprConfig extends Component{\n\n    canvasWidth = 200\n    canvasHeight = 200\n\n    state = {\n        currentSource: null,\n        promptSave: false, \n        camerasList: null,\n        videoSource: null,\n        initialPointsObject: {\n            x0: 0,\n            y0: 0,\n            width: 0,\n            height: 0\n        },\n        currentPointsObject: {\n            x0: 0,\n            y0: 0, \n            width: 0, \n            height: 0\n        },\n        playing: false,\n        currentCameraID: null  \n    }\n\n    // create references for html canvas \n    canvasRef = createRef() \n    videoRef = createRef()\n\n    // get the cameras from the database  \n    refresh = () => {\n\n        Axios.get('/api/cameras/getCameras').then(\n            data => {\n                // set the retrieved cameras to state variable \n                this.setState({camerasList: data.data.filter(d => {\n                    console.log(d)\n                    return d.isActive\n                    }), \n                    promptSave: false})\n            }\n        )\n    }\n\n    // when the component is mounted, set the initial configuration selection to the first camera in the camera list \n    componentDidMount(){\n\n        let source \n\n        Axios.get('/api/cameras/getCameras')\n        .then(data => {\n\n            source = data.data[0].source\n\n            this.setState({camerasList: data.data.filter(d => d.isActive), currentSource: data.data[0].source, playing: true})\n            console.log(data)\n        }).catch(err => {\n            console.log(err)\n        })\n    }\n\n    // called when html canvas is updated \n    componentDidUpdate(){\n\n        // use html canvas to update the current configuration for a camera \n        const canvas = this.canvasRef.current\n        canvas.addEventListener('mousedown', (e) => console.log(e))\n\n        const ctx = canvas.getContext('2d')\n        ctx.strokeStyle = 'red'\n\n        const canvasWidth = canvas.width  \n        this.canvasWidth = canvasWidth\n\n        const canvasHeight = canvas.height\n\n        // clear the previously drawn area so that the rectangle area moves \n        ctx.clearRect(0, 0, canvasWidth, canvasHeight)\n        ctx.fill()\n\n        let {x0, y0, width, height} = this.state.currentPointsObject\n        let vid = document.getElementById('vid')\n        \n        // ctx.drawImage(vid, 0, 0, canvasWidth, canvasHeight)\n        ctx.strokeRect(x0, y0, width, height)\n        ctx.save()\n    }\n\n    // post current configutration for a camera to database \n    submitConfiguration = () => {\n\n        // get the current points object\n        const pts = this.state.currentPointsObject\n        console.log(pts)\n\n        // update the configuration for a specific camera\n        Axios.put('/api/cameras/updateConfigurationArea', {\n            id: this.state.currentCameraID,\n            x0: pts.x0,\n            y0: pts.y0,\n            x1: pts.x0 + pts.width,\n            y1: pts.y0 + pts.height,\n            width: pts.width,\n            height: pts.height\n        }).then(data => {\n            console.log(data)\n            this.refresh()\n        })\n    }\n\n    // change the current camera for which you want to update the config area \n    setCurrentCamera = (data) => {\n\n        console.log(data)\n        console.log(data.areaConfiguration)\n        let savedConfiguration = data.areaConfiguration \n\n        let config = {\n            x0: savedConfiguration.x0,\n            y0: savedConfiguration.y0,\n            width: savedConfiguration.width,\n            height: savedConfiguration.height\n        }\n\n        // change state to currently selected camera \n        this.setState({\n            currentSource: data.source,\n            currentCameraID: data._id,\n            currentPointsObject: config\n        })\n\n        console.log(config)\n    }\n\n    render(){\n\n        console.log(this.state.currentPointsObject)\n        \n        let buttons = this.state.camerasList ? this.state.camerasList.map((data, index) => {\n            console.log(data)\n            return data.isActive ?  // only render active cameras \n            <Button style={classes.buttonStyling} key={index} onClick={() => this.setCurrentCamera(data)}>\n            {data.name}\n            </Button> : null\n        }) : null \n\n        return(\n            <div>\n                <h1>Configure License Plate Detection Zone</h1>\n                <p>Select a camera feed to configuzre its license plate detection area. Only license plates within the desingated box will be detected.</p>\n                <div style={classes.buttonsArea}>\n                {buttons}\n                </div>\n                <div style={classes.canvasArea}>\n                    <div style={{backgroundColor: 'red', overflow: 'hidden'}}>\n                        <canvas style={classes.canvas} ref={this.canvasRef}></canvas>\n                        <iframe src={this.state.currentSource} style={{position: 'absolute'}}>\n\n                        </iframe>\n                        <ReactPlayer \n                            style={{position: 'absolute'}} \n                            ref={this.videoRef} \n                            url={this.state.currentSource} \n                            playing \n                            muted/>\n                    </div>\n                    \n                    <div style={classes.configButtons}>\n                    <Button onClick={\n                        () => { \n\n                            const x0 = this.state.currentPointsObject.x0 \n                            const y0 = this.state.currentPointsObject.y0 - 3\n                            const width = this.state.currentPointsObject.width\n                            const height = this.state.currentPointsObject.height \n\n                            const coordsObj = {\n                                x0: x0, \n                                y0: y0,\n                                width: width,\n                                height: height\n                            }\n\n                            this.setState({currentPointsObject: coordsObj})\n                        }\n                    }\n                    style={{textAlign: 'left', marginBottom: '10px'}}\n                    >Vertical Up\n                    </Button>\n                    <Button onClick={\n                        () => { \n\n                            const x0 = this.state.currentPointsObject.x0  \n                            const y0 = this.state.currentPointsObject.y0 + 3\n                            const width = this.state.currentPointsObject.width\n                            const height = this.state.currentPointsObject.height \n\n                            const coordsObj = {\n                                x0: x0, \n                                y0: y0,\n                                width: width,\n                                height: height\n                            }\n\n                            this.setState({currentPointsObject: coordsObj})\n                        }\n                    }\n                    style={{textAlign: 'left', marginBottom: '10px'}}\n                    >Vertical Down\n                    </Button>\n                    <Button onClick={\n                        () => { \n                            \n                            const x0 = this.state.currentPointsObject.x0 - 3\n                            const y0 = this.state.currentPointsObject.y0 \n                            const width = this.state.currentPointsObject.width\n                            const height = this.state.currentPointsObject.height \n\n                            const coordsObj = {\n                                x0: x0, \n                                y0: y0,\n                                width: width,\n                                height: height\n                            }\n\n                            this.setState({currentPointsObject: coordsObj})\n                        }\n                    }\n                    style={{textAlign: 'left', marginBottom: '10px'}}\n                    >Horizontal Left \n                    </Button>\n                    <Button onClick={\n                        () => { \n                            \n                            const x0 = this.state.currentPointsObject.x0 + 3\n                            const y0 = this.state.currentPointsObject.y0 \n                            const width = this.state.currentPointsObject.width\n                            const height = this.state.currentPointsObject.height \n\n                            const coordsObj = {\n                                x0: x0, \n                                y0: y0,\n                                width: width,\n                                height: height\n                            }\n\n                            this.setState({currentPointsObject: coordsObj})\n                        }\n                    }\n                    style={{textAlign: 'left', marginBottom: '10px'}}\n                    >Horizontal Right\n                    </Button>\n                    <Button onClick={\n                        () => { \n                            \n                            const x0 = this.state.currentPointsObject.x0  \n                            const y0 = this.state.currentPointsObject.y0 \n                            const width = this.state.currentPointsObject.width + 3\n                            const height = this.state.currentPointsObject.height \n\n                            const coordsObj = {\n                                x0: x0, \n                                y0: y0,\n                                width: width,\n                                height: height\n                            }\n\n                            this.setState({currentPointsObject: coordsObj})\n                        }\n                    }\n                    style={{textAlign: 'left', marginBottom: '10px'}}\n                    >Expand Width\n                    </Button>\n                    <Button onClick={\n                        () => { \n                            \n                            const x0 = this.state.currentPointsObject.x0  \n                            const y0 = this.state.currentPointsObject.y0 \n                            const width = this.state.currentPointsObject.width - 3\n                            const height = this.state.currentPointsObject.height \n\n                            const coordsObj = {\n                                x0: x0, \n                                y0: y0,\n                                width: width,\n                                height: height\n                            }\n\n                            this.setState({currentPointsObject: coordsObj})\n                        }\n                    }\n                    style={{textAlign: 'left', marginBottom: '10px'}}\n                    >Minimize Width\n                    </Button>\n                    <Button onClick={\n                        () => { \n                            \n                            const x0 = this.state.currentPointsObject.x0  \n                            const y0 = this.state.currentPointsObject.y0 \n                            const width = this.state.currentPointsObject.width \n                            const height = this.state.currentPointsObject.height + 3\n\n                            const coordsObj = {\n                                x0: x0, \n                                y0: y0,\n                                width: width,\n                                height: height\n                            }\n\n                            this.setState({currentPointsObject: coordsObj})\n                        }\n                    }\n                    style={{textAlign: 'left', marginBottom: '10px'}}\n                    >Expand Height\n                    </Button>\n                    <Button onClick={\n                        () => { \n                            \n                            const x0 = this.state.currentPointsObject.x0  \n                            const y0 = this.state.currentPointsObject.y0 \n                            const width = this.state.currentPointsObject.width \n                            const height = this.state.currentPointsObject.height - 3\n\n                            const coordsObj = {\n                                x0: x0, \n                                y0: y0,\n                                width: width,\n                                height: height\n                            }\n\n                            this.setState({currentPointsObject: coordsObj})\n                        }\n                    }\n                    style={{textAlign: 'left', marginBottom: '10px'}}\n                    >Minimize Height\n                    </Button>\n                </div>\n                </div>\n                <a href=\"/dashboard/configuration\" style={{textDecoration: 'none', color: '#000', }}>\n                        <span class=\"material-icons\" style={classes.returnArrow}>\n                            arrow_back\n                        </span>  \n                </a>\n                <div style={{display: 'flex', marginLeft: '8%', alignItems: 'center', marginTop: '3%'}}>\n                    <Button onClick={() => {this.setState({promptSave: true})}}>\n                        Save Configuration \n                    </Button> \n                    {/* <Button>\n                        Revert Changes\n                    </Button> */}\n                    <SaveModal open={this.state.promptSave} cancel={() => {this.setState({promptSave: false})}} save={this.submitConfiguration}/>\n                </div>          \n            </div>\n        )\n    }\n}\n\nexport default LprConfig"]},"metadata":{},"sourceType":"module"}