{"ast":null,"code":"var _jsxFileName = \"/Users/aleclawlor/SecureVision/client/src/components/unrecognizedActivity/unrecognizedDashboard.js\";\nimport React, { Component } from 'react';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport UnrecognizedTable from './unrecognizedTable';\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport Loader from 'react-loader-spinner';\nimport io from 'socket.io-client';\n\nconst Axios = require('axios');\n\nconst accentColor = '#1C63CD';\nconst accentColor_secondary = '#FD663A'; // material styling \n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1\n  },\n  paper: {\n    padding: theme.spacing(2),\n    textAlign: 'center',\n    color: theme.palette.text.secondary\n  },\n  chart: {\n    width: '125%',\n    height: '300px'\n  },\n  heatmap: {\n    padding: theme.spacing(2),\n    width: '75%',\n    marginLeft: '25%',\n    height: '310px'\n  },\n  timePlot: {\n    marginTop: '30px',\n    padding: theme.spacing(2),\n    width: '75%',\n    marginLeft: '25%',\n    height: '310px'\n  }\n})); // main unrecognized table component page \n\nclass MyGrid extends Component {\n  constructor(...args) {\n    super(...args);\n    this.socket = io.connect('http://localhost:8000');\n    this.state = {\n      dataList: [],\n      sortType: 'recent',\n      loading: true\n    };\n\n    this.setSort = type => {\n      console.log(type);\n\n      if (type === 'recent') {\n        this.setState({\n          sortType: 'recent'\n        });\n      } else if (type === 'recognitions') {\n        this.setState({\n          sortType: 'recognitions'\n        });\n      }\n\n      this.refresh();\n    };\n\n    this.refresh = async () => {\n      let data = await Axios.get('/api/lpr/getUnrecognizedData');\n      let rawData = data.data;\n      let sorted;\n\n      if (this.state.sortType === 'recent') {\n        sorted = rawData.sort((a, b) => a.date < b.date ? 1 : a.date === b.date ? a.time < b.time ? 1 : -1 : -1);\n      } else if (this.state.sortType === 'recognitions') {\n        sorted = rawData.sort((a, b) => a.entryNumber > b.entryNumber ? -1 : a.entryNumber === b.entryNumber ? -1 : 1);\n      }\n\n      localStorage.setItem('lastUnrecognized', JSON.stringify(rawData[0]));\n      this.setState({\n        dataList: sorted,\n        loading: false\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.socket.on('licensePlateRecognized', data => {\n      console.log(data);\n      console.log('socket triggered on frontend');\n      this.refresh();\n    });\n    this.refresh(); // set data fresh interval \n    // this.intervalId = setInterval(this.refresh, 10000)\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.intervalId);\n  }\n\n  render() {\n    const {\n      classes\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.root,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      spacing: 3,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 6,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Paper, {\n      className: classes.chart,\n      style: {\n        width: '200%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 13\n      }\n    }, this.state.loading ? /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginLeft: '30%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Loader, {\n      type: \"Rings\",\n      color: accentColor,\n      secondaryColor: accentColor_secondary,\n      height: 400,\n      width: 400,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 21\n      }\n    })) : [/*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => {\n        Axios.get('/api/lpr/clearUnrecognizedFeed');\n        this.refresh();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 20\n      }\n    }, \"Delete All Data\"), /*#__PURE__*/React.createElement(UnrecognizedTable, {\n      setSort: this.setSort,\n      dataList: this.state.dataList,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 19\n      }\n    })])), /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 6,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}\n\nexport default withStyles(useStyles)(MyGrid);","map":{"version":3,"sources":["/Users/aleclawlor/SecureVision/client/src/components/unrecognizedActivity/unrecognizedDashboard.js"],"names":["React","Component","makeStyles","withStyles","Paper","Grid","UnrecognizedTable","Loader","io","Axios","require","accentColor","accentColor_secondary","useStyles","theme","root","flexGrow","paper","padding","spacing","textAlign","color","palette","text","secondary","chart","width","height","heatmap","marginLeft","timePlot","marginTop","MyGrid","socket","connect","state","dataList","sortType","loading","setSort","type","console","log","setState","refresh","data","get","rawData","sorted","sort","a","b","date","time","entryNumber","localStorage","setItem","JSON","stringify","componentDidMount","on","componentWillUnmount","clearInterval","intervalId","render","classes","props"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport UnrecognizedTable from './unrecognizedTable'\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\"\nimport Loader from 'react-loader-spinner'\nimport io from 'socket.io-client'\n\nconst Axios = require('axios')\n\nconst accentColor = '#1C63CD'\nconst accentColor_secondary = '#FD663A'\n\n// material styling \nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n  },\n  paper: {\n    padding: theme.spacing(2),\n    textAlign: 'center',\n    color: theme.palette.text.secondary,\n  },\n  chart: {\n      width: '125%',\n      height: '300px'\n  },\n  heatmap: {\n      padding: theme.spacing(2),\n      width: '75%',\n      marginLeft: '25%',\n      height: '310px'\n  },\n  timePlot: {\n    marginTop: '30px',\n    padding: theme.spacing(2),\n    width: '75%',\n    marginLeft: '25%',\n    height: '310px'\n  }\n}));\n\n// main unrecognized table component page \nclass MyGrid extends Component {\n\n  // initialize a socket for webhooks\n  // used to update what is rendered after a new license plate is found \n  // TODO: update with url of server on heroku \n  socket = io.connect('http://localhost:8000')\n\n  // // set interval for refreshing data \n  // intervalId\n\n  state = {\n    dataList: [],\n    sortType: 'recent',\n    loading: true\n  }\n  \n  // set the current sort type \n  // TODO: implement sorting \n  setSort = (type) => {\n    \n    console.log(type)\n\n    if(type === 'recent'){\n      this.setState({sortType: 'recent'})\n    }\n\n    else if(type === 'recognitions'){\n      this.setState({sortType: 'recognitions'})\n    }\n\n    this.refresh()\n  }\n\n  // refresh the rendered data to update new unrecognized plates that have entered the school \n  refresh = async() => {\n\n    let data = await Axios.get('/api/lpr/getUnrecognizedData')\n    \n    let rawData = data.data\n\n    let sorted\n\n    if(this.state.sortType === 'recent'){\n      sorted = rawData.sort((a,b) => (a.date < b.date) ? 1: (a.date === b.date) ? ((a.time < b.time) ? 1 : -1): -1)\n    }\n    \n    else if(this.state.sortType === 'recognitions'){\n      sorted = rawData.sort((a, b) => (a.entryNumber > b.entryNumber) ? -1 : (a.entryNumber === b.entryNumber) ? -1 : 1)\n    }\n\n    localStorage.setItem('lastUnrecognized', JSON.stringify(rawData[0]))\n    this.setState({dataList: sorted, loading: false})\n  }\n\n  componentDidMount(){\n\n    this.socket.on('licensePlateRecognized', (data) => {\n      console.log(data)\n      console.log('socket triggered on frontend')\n      this.refresh()\n    })\n\n    this.refresh()\n    // set data fresh interval \n    // this.intervalId = setInterval(this.refresh, 10000)\n  }\n\n  componentWillUnmount(){\n    clearInterval(this.intervalId)\n  }\n  \n  render(){\n    const {classes} = this.props;\n\n    return (\n      <div className={classes.root}>\n        <Grid container spacing={3}>\n          <Grid item xs={6}>\n            <Paper className={classes.chart} style={{width: '200%'}}>\n                {this.state.loading ? \n                <div style={{marginLeft: '30%'}}>\n                    <Loader\n                    type=\"Rings\"\n                    color={accentColor}\n                    secondaryColor={accentColor_secondary}\n                    height={400}\n                    width={400}\n                    />\n                </div>\n                  :\n                  [<button onClick={() => {\n                    Axios.get('/api/lpr/clearUnrecognizedFeed')\n                    this.refresh()\n                  }}>Delete All Data</button>,\n                  <UnrecognizedTable setSort={this.setSort} dataList={this.state.dataList}/>\n                  ]}\n            </Paper>\n          </Grid>\n          <Grid item xs={6}>\n          </Grid>\n        </Grid>\n      </div>\n    )};\n}\n\nexport default withStyles(useStyles)(MyGrid)"]},"metadata":{},"sourceType":"module"}