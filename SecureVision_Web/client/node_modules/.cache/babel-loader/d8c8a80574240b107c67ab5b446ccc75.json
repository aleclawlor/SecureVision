{"ast":null,"code":"const Axios = require('axios');\n\nconst sendImage = () => {\n  Axios.get('/api/getPlates/sendToAPI');\n  let constraints = {\n    audio: false,\n    video: {\n      width: 640,\n      height: 480\n    }\n  };\n  navigator.mediaDevices.getUserMedia(constraints).then(success).catch(error);\n\n  function success(stream) {\n    let video = document.getElementById('video');\n    video.setAttribute('controls', 'controls');\n    video.src = './security.mp4';\n    let canvas = document.createElement('canvas');\n    canvas.width = 400;\n    canvas.height = 400;\n    let context = canvas.getContext('2d');\n    let dataURL = canvas.toDataURL();\n    context.globalCompositeOperation = 'difference';\n    setInterval(capture, 10000);\n\n    function capture() {\n      context.drawImage(video, 0, 0, 640, 480);\n      fetch(\"https://zyanyatech1-license-plate-recognition-v1.p.rapidapi.com/recognize_url?image_url=https://media.graytvinc.com/images/810*607/'JAP'+license+tag.jpg\", {\n        \"method\": \"POST\",\n        \"headers\": {\n          \"x-rapidapi-host\": \"zyanyatech1-license-plate-recognition-v1.p.rapidapi.com\",\n          \"x-rapidapi-key\": \"ce3bc633bcmshbe2ffe62ecb1ab1p1888dbjsn8444ca495896\",\n          \"content-type\": \"application/x-www-form-urlencoded\"\n        },\n        \"body\": {\n          \"image_url\": \"https://i.imgur.com/ThxraIC.jpg\"\n        }\n      }).then(response => {\n        console.log(response);\n        console.log(\"Image uploaded\");\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  }\n\n  function error(error) {\n    console.log(error);\n  }\n};\n\nmodule.exports = sendImage;","map":{"version":3,"sources":["/Users/aleclawlor/SecureVision/client/src/components/dashboard/sendFeed.js"],"names":["Axios","require","sendImage","get","constraints","audio","video","width","height","navigator","mediaDevices","getUserMedia","then","success","catch","error","stream","document","getElementById","setAttribute","src","canvas","createElement","context","getContext","dataURL","toDataURL","globalCompositeOperation","setInterval","capture","drawImage","fetch","response","console","log","err","module","exports"],"mappings":"AAAA,MAAMA,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;;AAEA,MAAMC,SAAS,GAAG,MAAM;AACpBF,EAAAA,KAAK,CAACG,GAAN,CAAU,0BAAV;AAEA,MAAIC,WAAW,GAAG;AACdC,IAAAA,KAAK,EAAE,KADO;AAEdC,IAAAA,KAAK,EAAE;AAACC,MAAAA,KAAK,EAAE,GAAR;AAAaC,MAAAA,MAAM,EAAE;AAArB;AAFO,GAAlB;AAKAC,EAAAA,SAAS,CAACC,YAAV,CAAuBC,YAAvB,CAAoCP,WAApC,EACCQ,IADD,CACMC,OADN,EAECC,KAFD,CAEOC,KAFP;;AAIA,WAASF,OAAT,CAAiBG,MAAjB,EAAwB;AACpB,QAAIV,KAAK,GAAGW,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAAZ;AACAZ,IAAAA,KAAK,CAACa,YAAN,CAAmB,UAAnB,EAA+B,UAA/B;AACAb,IAAAA,KAAK,CAACc,GAAN,GAAY,gBAAZ;AAEA,QAAIC,MAAM,GAAGJ,QAAQ,CAACK,aAAT,CAAuB,QAAvB,CAAb;AACAD,IAAAA,MAAM,CAACd,KAAP,GAAe,GAAf;AACAc,IAAAA,MAAM,CAACb,MAAP,GAAgB,GAAhB;AACA,QAAIe,OAAO,GAAGF,MAAM,CAACG,UAAP,CAAkB,IAAlB,CAAd;AAEA,QAAIC,OAAO,GAAGJ,MAAM,CAACK,SAAP,EAAd;AACAH,IAAAA,OAAO,CAACI,wBAAR,GAAmC,YAAnC;AAEAC,IAAAA,WAAW,CAACC,OAAD,EAAU,KAAV,CAAX;;AAEA,aAASA,OAAT,GAAmB;AACfN,MAAAA,OAAO,CAACO,SAAR,CAAkBxB,KAAlB,EAAyB,CAAzB,EAA4B,CAA5B,EAA+B,GAA/B,EAAoC,GAApC;AACAyB,MAAAA,KAAK,CAAC,0JAAD,EAA6J;AAClK,kBAAU,MADwJ;AAElK,mBAAW;AACP,6BAAmB,yDADZ;AAEP,4BAAkB,oDAFX;AAGP,0BAAgB;AAHT,SAFuJ;AAOlK,gBAAQ;AACJ,uBAAY;AADR;AAP0J,OAA7J,CAAL,CAUGnB,IAVH,CAUQoB,QAAQ,IAAI;AAChBC,QAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACH,OAbD,EAaGpB,KAbH,CAaSqB,GAAG,IAAI;AACZF,QAAAA,OAAO,CAACC,GAAR,CAAYC,GAAZ;AACH,OAfD;AAgBH;AAEJ;;AAED,WAASpB,KAAT,CAAeA,KAAf,EAAqB;AACjBkB,IAAAA,OAAO,CAACC,GAAR,CAAYnB,KAAZ;AACH;AACJ,CApDD;;AAsDAqB,MAAM,CAACC,OAAP,GAAiBnC,SAAjB","sourcesContent":["const Axios = require('axios')\n\nconst sendImage = () => {\n    Axios.get('/api/getPlates/sendToAPI')\n\n    let constraints = {\n        audio: false,\n        video: {width: 640, height: 480}\n    }\n    \n    navigator.mediaDevices.getUserMedia(constraints)\n    .then(success)\n    .catch(error)\n    \n    function success(stream){\n        let video = document.getElementById('video')\n        video.setAttribute('controls', 'controls')\n        video.src = './security.mp4'\n    \n        let canvas = document.createElement('canvas')\n        canvas.width = 400\n        canvas.height = 400\n        let context = canvas.getContext('2d')\n    \n        let dataURL = canvas.toDataURL()\n        context.globalCompositeOperation = 'difference'\n    \n        setInterval(capture, 10000)\n    \n        function capture() {\n            context.drawImage(video, 0, 0, 640, 480)\n            fetch(\"https://zyanyatech1-license-plate-recognition-v1.p.rapidapi.com/recognize_url?image_url=https://media.graytvinc.com/images/810*607/'JAP'+license+tag.jpg\", {\n            \"method\": \"POST\",\n            \"headers\": {\n                \"x-rapidapi-host\": \"zyanyatech1-license-plate-recognition-v1.p.rapidapi.com\",\n                \"x-rapidapi-key\": \"ce3bc633bcmshbe2ffe62ecb1ab1p1888dbjsn8444ca495896\",\n                \"content-type\": \"application/x-www-form-urlencoded\"\n            },\n            \"body\": {\n                \"image_url\":\"https://i.imgur.com/ThxraIC.jpg\"\n            }\n            }).then(response => {\n                console.log(response)\n                console.log(\"Image uploaded\")\n            }).catch(err => {\n                console.log(err);\n            });\n        }\n    \n    }\n    \n    function error(error){\n        console.log(error)\n    }\n}\n\nmodule.exports = sendImage"]},"metadata":{},"sourceType":"module"}